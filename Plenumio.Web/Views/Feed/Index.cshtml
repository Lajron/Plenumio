@model PageVM<FeedPageModel>

@{
    ViewData["Title"] = Model.Title;
}

<div class="col-8 d-flex flex-column">
    @if (SignInManager.IsSignedIn(User)) {
            <partial name="_CreatePostFeed" model='new CreatePostVM {
                                        Type = PostType.Standard,
                                        Content = "",
                                        Privacy = PrivacyType.Public,
                                        Tags = string.Empty
                                    }' />
    }

    <partial name="_FeedCards" model="@Model.Content" />
</div>

<div class="col-4 d-flex flex-column gap-3">

    <vc:trending-tags-card current-user-id="@Model.CurrentUserId"></vc:trending-tags-card>

    <vc:trending-users-card current-user-id="@Model.CurrentUserId"></vc:trending-users-card>

    <partial name="_RecentlyViewedPosts" />

    <partial name="_Footer" />

</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        const typeSelect = document.getElementById("Type");
        const titleWrapper = document.querySelector(".title-wrapper");
        typeSelect.addEventListener("change", () => {
            if (typeSelect.value === "Article") {
                titleWrapper.classList.remove("d-none");
            } else {
                titleWrapper.classList.add("d-none");
                const titleInput = document.getElementById("Title");
                if (titleInput) titleInput.value = "";
            }
        });
    </script>
}