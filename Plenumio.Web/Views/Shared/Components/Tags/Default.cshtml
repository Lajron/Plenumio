@using Plenumio.Application.DTOs.Tags.Responses
@using Plenumio.Web.Models.Filter
@model PageVM<IEnumerable<TagVM>>

<div class="card border-0 shadow-sm">

    <div class="card-header border-0 py-2 px-3 small">
        <a asp-controller="Tag" asp-action="Index" asp-route-SearchTerm="@Model.Title" class="d-flex justify-content-between align-items-center text-decoration-none">
            <span class="fw-bold text-body text-uppercase">Tags - @Model.Title</span>
            <span class="text-secondary">See all</span>
        </a>
    </div>

    <div class="card-body p-0">
        @foreach (var tag in Model.Content) {
            <div class="d-flex justify-content-between align-items-center px-3 py-1 border-bottom">
                <a asp-controller="Tag" asp-action="Details" asp-route-tagName="@tag.Name" class="text-decoration-none text-body">
                    <div>
                        <span class="fw-semibold text-primary">@( "#" + tag.DisplayedName.ToLower())</span>
                        <span class="badge bg-light text-muted ms-2">@tag.PostsCount posts</span>
                        <span class="badge bg-light text-muted ms-2">@tag.FollowersCount following</span>
                    </div>
                </a>


                <form asp-controller="Tags" asp-action="ToggleFollow" asp-route-id="@tag.Id" method="post" class="m-0">
                    <button type="submit"
                            class="btn btn-sm @(tag.IsFollowing ? "btn-outline-secondary" : "btn-light border")">
                        @(tag.IsFollowing ? "Unfollow" : "Follow")
                    </button>
                </form>

            </div>
        }
    </div>
</div>